package testParsing;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;
import java.util.Locale;

public class DateParser {

    public static LocalDate parseDate(String input) {
      //GIORNO-MESE-ANNO
        DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd MMMM yyyy", Locale.ITALIAN);

        try {
        	//DIVIDI A "DEL"->input.split(" del ")
        	//parte 1="appuntamento"
        	//[[del]]
        	//parte 2= "27 ottobre 2022 09:00 - Riepilogo"
        	//DIVISIONE 2-> input.split(" del ")[1].split(" ") divide la parte 2
        	//diventa un array di 6 elementi->[0] = "27",[1] = "ottobre", 
        	//[2] = "2022",[3] = "09:00",[4] = "-",[5] = "Riepilogo"
            String datePart = input.split(" del ")[1].split(" ")[0] +
            		 " " + input.split(" del ")[1].split(" ")[1] +
            		" " + input.split(" del ")[1].split(" ")[2];
            LocalDate date = LocalDate.parse(datePart, formatter);
            return date;
        } catch (DateTimeParseException e) {
           
            System.out.println("PARSER FALLITO:" + e.getMessage());
            return null;
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("FORMATO INPUT INCORRETTO: " + e.getMessage());
            return null;
        }
    }

    public static void main(String[] args) {
    	String input = "Appuntamento del 27 novembre 2022 09:00 - Riepilogo";
    	String input2= "Appuntamento del 01 marzo 2023 12:00 - Riepilogo";
        LocalDate date = parseDate(input2);
        if (date != null) {
            System.out.println("Parsed date: " + date);
        } else {
            System.out.println("Failed to parse date.");
        }
    }
}